<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>15 CÃ¢u Sinh Tá»­ - NCT9x Master</title>
<style>
:root{--gold:#f1c40f;--blue:#3498db;--dark:#020230;--red:#e74c3c;--green:#2ecc71;}
body{margin:0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:var(--dark);color:#fff;display:flex;justify-content:center;align-items:center;min-height:100vh;overflow:hidden;user-select:none}
.box{width:95%;max-width:500px;background:#000;border:2px solid var(--gold);border-radius:20px;padding:20px;box-shadow:0 0 40px rgba(241,196,15,.2);position:relative}
h1{text-align:center;color:var(--gold);margin:5px 0 20px;text-transform:uppercase;letter-spacing:1px;font-size:1.8em}
.input-group{margin-bottom:20px;text-align:center}
input{width:70%;padding:12px;background:#111;border:2px solid #444;color:var(--gold);border-radius:10px;font-size:1.2em;outline:none;transition:.3s;text-align:center;font-weight:bold;text-transform:capitalize}
input:focus{border-color:var(--gold);box-shadow:0 0 15px rgba(241,196,15,.3)}
.lifelines{display:flex;justify-content:space-between;margin-bottom:15px;padding:0 10px}
.life-btn{background:#111;border:2px solid var(--gold);color:var(--gold);width:50px;height:50px;border-radius:50%;font-size:1.5em;cursor:pointer;transition:.3s;display:flex;align-items:center;justify-content:center;position:relative}
.life-btn:hover{background:var(--gold);color:#000;transform:scale(1.1)}
.life-btn.used{filter:grayscale(1);opacity:.4;cursor:not-allowed;border-color:#555;pointer-events:none}
.life-btn.used::after{content:'âŒ';position:absolute;font-size:1.2em;color:red}
#timer{font-size:2.2em;text-align:center;font-weight:bold;color:var(--red);text-shadow:0 0 10px var(--red);margin:5px 0;font-family:monospace}
.options-grid{display:grid;gap:10px;margin-top:15px}
.option{padding:12px;border:1px solid var(--blue);border-radius:8px;cursor:pointer;transition:.2s;background:rgba(52,152,219,.1);display:flex;align-items:center;min-height:40px}
.option:hover{background:rgba(52,152,219,.3);transform:translateX(5px)}
.option.correct{background:var(--green)!important;border-color:#fff;color:#000;font-weight:bold;animation:pulse .5s}
.option.wrong{background:var(--red)!important;border-color:#fff;opacity:.9}
.option.hidden-50{opacity:0;pointer-events:none;visibility:hidden}
#overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.9);z-index:10;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:18px;text-align:center;padding:20px;box-sizing:border-box}
#overlay h3{color:var(--gold);margin-top:0;font-size:1.5em}
#overlay p{font-size:1.1em;line-height:1.5;color:#fff}
.close-btn{margin-top:20px;padding:10px 30px;background:var(--blue);border:none;color:#fff;border-radius:5px;cursor:pointer;font-weight:bold}
.btn{width:100%;padding:14px;margin-top:20px;border-radius:8px;border:2px solid var(--gold);background:var(--gold);color:#000;font-weight:bold;cursor:pointer;transition:.3s;text-transform:uppercase;font-size:1em}
.btn:hover{background:#fff;border-color:#fff;box-shadow:0 0 15px #fff}
#explain{color:var(--gold);margin-top:15px;font-style:italic;text-align:center;background:rgba(255,255,255,.1);padding:10px;border-radius:8px;font-size:.9em}
.hidden{display:none!important}
.nct-signature{text-align:center;font-size:.75em;opacity:.6;margin-top:15px;font-style:italic;color:var(--gold)}
.disabled{pointer-events:none}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}
</style>
</head>
<body>

<div class="box">
  <div id="screen-start">
    <h1>ğŸ§  15 CÃ‚U SINH Tá»¬</h1>
    <div class="input-group">
      <input type="text" id="inp-name" placeholder="Nháº­p tÃªn báº¡n (VD: Linh)" autocomplete="off" onkeypress="handleEnter(event)">
    </div>
    <div class="rule-list" style="color:#ccc;font-size:.9em;line-height:1.6;margin-bottom:15px;background:rgba(255,255,255,.05);padding:15px;border-radius:10px;">
      ğŸ’ <b>LUáº¬T CHÆ I MASTER:</b><br>
      â€¢ 4 quyá»n trá»£ giÃºp cá»±c máº¡nh.<br>
      â€¢ DÃ¹ng trá»£ giÃºp = gáº§n nhÆ° qua mÃ n.<br>
      â€¢ <b>15 giÃ¢y</b> suy nghÄ©.<br>
      â€¢ Tá»« cÃ¢u 7 trá»Ÿ lÃªn: khÃ³ dáº§n â€“ nhiá»u báº«y logic.<br>
      â€¢ Tá»« cÃ¢u 13 trá»Ÿ lÃªn: khÃ³a ngáº«u nhiÃªn 1 trá»£ giÃºp.<br>
      â€¢ VÆ°á»£t qua cÃ¢u 15 Ä‘á»ƒ thÃ nh Huyá»n Thoáº¡i.
    </div>
    <div style="color:#ffb703;font-size:.9em;margin-bottom:10px;">
      ğŸ’¬ Báº¡n yÃªu Ã , khÃ³ thÃ¬ dÃ¹ng trá»£ giÃºp, khÃ³ ná»¯a thÃ¬ chá»‹u thua â€“ Ä‘á»«ng cÃ³ search Google, nÃ³ láº¡i hÃ¨n ra ğŸ˜†
    </div>
    <button class="btn" onclick="game.start()">CHIáº¾N NGAY</button>
    <div class="nct-signature">
      ğŸ’¬ Xin chÃ o, hÃ´m nay báº¡n má»‡t má»i láº¯m Ã ? VÃ o Ä‘Ã¢y giáº£i trÃ­ chÃºt nhÃ©â€¦<br>
      Mini game nÃ y lÃ  Ä‘á»©a con gháº» cá»§a NCT hihi ğŸ˜†
    </div>
  </div>

  <div id="screen-play" class="hidden">
    <div class="lifelines">
      <button class="life-btn" id="btn-5050" onclick="game.life5050()" title="50:50">âš–ï¸</button>
      <button class="life-btn" id="btn-phone" onclick="game.lifePhone()" title="Gá»i ngÆ°á»i thÃ¢n">ğŸ“</button>
      <button class="life-btn" id="btn-audience" onclick="game.lifeAudience()" title="Há»i khÃ¡n giáº£">ğŸ‘¥</button>
      <button class="life-btn" id="btn-expert" onclick="game.lifeExpert()" title="Tá»• tÆ° váº¥n">ğŸ§™</button>
    </div>

    <div style="display:flex;justify-content:space-between;align-items:center;color:var(--gold);border-bottom:1px solid #333;padding-bottom:5px;">
      <span id="player-display" style="font-weight:bold;"></span>
      <span id="progress" style="font-size:.9em;">CÃ‚U 1/15</span>
    </div>

    <div id="timer">15</div>
    <p id="question" style="font-size:1.2em;text-align:center;min-height:60px;font-weight:500;margin:10px 0;"></p>
    <div class="options-grid" id="options"></div>
    <div id="explain" class="hidden"></div>
  </div>

  <div id="overlay" class="hidden">
    <h3 id="overlay-title"></h3>
    <div id="overlay-content"></div>
    <button class="close-btn" onclick="game.closeOverlay()">ÄÃƒ HIá»‚U</button>
  </div>

  <div id="screen-result" class="hidden">
    <h1 id="res-title" style="font-size:2em;"></h1>
    <p id="res-msg" style="text-align:center;line-height:1.6;font-size:1.1em;padding:10px;"></p>
    <button class="btn" onclick="location.reload()">CHÆ I Láº I Tá»ª Äáº¦U</button>
    <div class="nct-signature">NCT9x chÃºc báº¡n may máº¯n láº§n sau âœ¨</div>
  </div>
</div>

<script>
/* ================== DATABASE (80+ â€“ ÄA Dáº NG & BáºªY) ================== */
const DB = [
  // EASY (5)
  {l:"easy",q:"Máº·t trá»i má»c hÆ°á»›ng nÃ o?",o:["TÃ¢y","Nam","Báº¯c","ÄÃ´ng"],c:3},
  {l:"easy",q:"Con gÃ  cÃ³ máº¥y chÃ¢n?",o:["1","2","3","4"],c:1},
  {l:"easy",q:"1 tÃ¡ báº±ng bao nhiÃªu?",o:["10","12","20","100"],c:1},
  {l:"easy",q:"BÃ¡nh chÆ°ng hÃ¬nh gÃ¬?",o:["TrÃ²n","VuÃ´ng","Tam giÃ¡c","Chá»¯ nháº­t"],c:1},
  {l:"easy",q:"What color is the sky?",o:["Green","Blue","Red","Yellow"],c:1},

  // MEDIUM (5)
  {l:"medium",q:"CÃ¡i gÃ¬ tay pháº£i cáº§m Ä‘Æ°á»£c mÃ  tay trÃ¡i khÃ´ng cáº§m Ä‘Æ°á»£c?",o:["BÃºt","CÃ¡nh tay trÃ¡i","Ly","Äiá»‡n thoáº¡i"],c:1},
  {l:"medium",q:"5 chia 5 = 1. TÃ­ cÃ³ 5 káº¹o chia cho 5 báº¡n. TÃ­ cÃ²n máº¥y?",o:["0","1","5","KhÃ´ng biáº¿t"],c:0},
  {l:"medium",q:"á» Ä‘Ã¢u hÃ´m nay Ä‘á»©ng trÆ°á»›c hÃ´m qua?",o:["TrÆ°á»ng há»c","NhÃ  báº¿p","Tá»« Ä‘iá»ƒn","CÃ´ng viÃªn"],c:2},
  {l:"medium",q:"CÃ¡i gÃ¬ cÃ ng cáº¥t láº¡i cÃ ng tháº¥y?",o:["Tiá»n","NhÃ ","CÃ¡t","RÃ¡c"],c:1},
  {l:"medium",q:"Náº¿u vÆ°á»£t ngÆ°á»i thá»© 2 trong cuá»™c Ä‘ua, báº¡n Ä‘á»©ng thá»© máº¥y?",o:["1","2","3","4"],c:1},

  // HARD (5 â€“ BOSS/BáºªY)
  {l:"hard",q:"Náº¿u hÃ´m nay lÃ  Thá»© Hai, ngÃ y kia cá»§a ngÃ y hÃ´m qua lÃ  ngÃ y gÃ¬?",o:["Thá»© Hai","Thá»© Ba","Chá»§ nháº­t","Thá»© TÆ°"],c:0},
  {l:"hard",q:"CÃ¡i gÃ¬ cÃ ng láº¥y Ä‘i thÃ¬ nÃ³ cÃ ng to?",o:["CÃ¡i há»‘","CÃ¡i tÃºi","CÃ¡i ná»£","CÃ¡i bá»¥ng"],c:0},
  {l:"hard",q:"BÃºt + táº©y = 1.10$. BÃºt Ä‘áº¯t hÆ¡n táº©y 1$. GiÃ¡ bÃºt?",o:["1$","1.05$","0.10$","0.55$"],c:1},
  {l:"hard",q:"I speak without a mouth and hear without ears. I am?",o:["Echo","Shadow","Cloud","Wind"],c:0},
  {l:"hard",q:"Náº¿u 1=5, 2=25, 3=325, 4=4325 thÃ¬ 5=?",o:["54325","54321","5325","KhÃ´ng xÃ¡c Ä‘á»‹nh"],c:0},

  // BONUS â€“ logic ngÆ°á»£c & xÃ£ há»™i (Ä‘á»ƒ build pack Ä‘a dáº¡ng)
  {l:"medium",q:"Tá»« nÃ o 100% ngÆ°á»i Viá»‡t phÃ¡t Ã¢m sai?",o:["Sai","ÄÃºng","Lá»—i","Chuáº©n"],c:0},
  {l:"medium",q:"CÃ¡i gÃ¬ cá»§a báº¡n nhÆ°ng ngÆ°á»i khÃ¡c dÃ¹ng nhiá»u hÆ¡n?",o:["VÃ­","TÃªn","Ão","Máº·t"],c:1},
  {l:"medium",q:"CÃ¡i gÃ¬ Ä‘i kháº¯p tháº¿ giá»›i mÃ  váº«n náº±m má»™t chá»—?",o:["GiÃ³","NÆ°á»›c","Con tem","MÃ¢y"],c:2},
  {l:"hard",q:"Sá»‘ nÃ o tÄƒng lÃªn khi láº­t ngÆ°á»£c?",o:["6","8","9","0"],c:0},
  {l:"hard",q:"CÃ³ 10 ngÃ³n tay trong 1 cÃ¡i há»™p. ÄÃ³ lÃ  gÃ¬?",o:["Há»™p","Bao tay","TÃºi","ThÃ¹ng"],c:1}
];

/* ================== GAME LOGIC ================== */
const game = {
  index:0, pack:[], timer:15, interval:null,
  lockedIds: JSON.parse(localStorage.getItem("NCT_MASTER")||"[]"),
  user:{name:"",gender:"other"},
  lifelines:{'5050':true,'phone':true,'audience':true,'expert':true},
  isPaused:false,

  start(){
    const name=document.getElementById('inp-name').value.trim();
    if(!name){alert("Nháº­p tÃªn vÃ o Ä‘Ã£ báº¡n Æ¡i!");return;}
    this.user.name=name; this.user.gender=this.detectGender(name);
    document.querySelectorAll('.life-btn').forEach(b=>b.classList.remove('used'));
    this.lifelines={'5050':true,'phone':true,'audience':true,'expert':true};

    this.pack=this.buildPack();
    if(this.pack.length<15){alert("KhÃ´ng Ä‘á»§ cÃ¢u há»i. Reset DB!");return;}

    document.getElementById('screen-start').classList.add('hidden');
    document.getElementById('screen-play').classList.remove('hidden');
    document.getElementById('player-display').innerText=`NgÆ°á»i chÆ¡i: ${this.user.name}`;
    this.loadQuestion();
  },

  detectGender(name){
    const n=name.toLowerCase();
    const males=['hÃ¹ng','cÆ°á»ng','dÅ©ng','nam','tÃ¹ng','sÆ¡n','Ä‘á»©c','tháº¯ng','minh','hiáº¿u','huy','long','khÃ¡nh','Ä‘áº¡t','tuáº¥n','trung','thÃ nh','quang','vinh','kiÃªn','hoÃ ng','phÃºc','lÃ¢m','khoa','viá»‡t','tÃ i','háº£i','báº£o'];
    const females=['lan','mai','ly','hÆ°Æ¡ng','háº±ng','huyá»n','trang','tháº£o','vy','linh','phÆ°Æ¡ng','nhung','thu','thá»§y','hÃ ','hiá»n','dung','trinh','tuyáº¿t','nhi','hÃ¢n','thÆ°','yáº¿n','quá»³nh','hoa','trÃ¢m','diá»…m','thÃºy','kiá»u','nga','ngÃ¢n','chÃ¢u','anh','oanh','vÃ¢n'];
    if(males.includes(n)) return 'male';
    if(females.includes(n)) return 'female';
    return 'other';
  },

  buildPack(){
    const avail=DB.filter(q=>!this.lockedIds.includes(q.q));
    const get=(lvl,n)=>avail.filter(q=>q.l===lvl).sort(()=>Math.random()-.5).slice(0,n);
    return [...get('easy',5),...get('medium',5),...get('hard',5)];
  },

  loadQuestion(){
    clearInterval(this.interval); this.isPaused=false;
    const q=this.pack[this.index]; this.timer=15;
    document.getElementById('timer').innerText=this.timer;
    document.getElementById('progress').innerText=`CÃ‚U ${this.index+1}/15`;
    document.getElementById('question').innerText=q.q;
    document.getElementById('explain').classList.add('hidden');
    const box=document.getElementById('options'); box.innerHTML=''; box.classList.remove('disabled');

    q.o.forEach((t,i)=>{
      const d=document.createElement('div');
      d.className='option';
      d.innerHTML=`<b style="color:var(--gold);margin-right:10px">${String.fromCharCode(65+i)}.</b> ${t}`;
      d.onclick=()=>this.check(i);
      box.appendChild(d);
    });

    // Hard mode tá»« cÃ¢u 7+
    if(this.index>=6){
      document.getElementById('timer').style.color='#ff7675';
    }

    // Boss: cÃ¢u 13+ khÃ³a 1 trá»£ giÃºp
    if(this.index>=12){
      this.lockRandomLifeline();
      if(this.index===12) alert("ğŸ˜ˆ BOSS MODE: KhÃ³a ngáº«u nhiÃªn 1 trá»£ giÃºp!");
    }

    this.interval=setInterval(()=>{
      if(!this.isPaused){
        this.timer--; document.getElementById('timer').innerText=this.timer;
        if(this.timer<=0) this.lose(true);
      }
    },1000);
  },

  lockRandomLifeline(){
    const keys=Object.keys(this.lifelines).filter(k=>this.lifelines[k]);
    if(keys.length===0) return;
    const pick=keys[Math.floor(Math.random()*keys.length)];
    this.lifelines[pick]=false;
    const id={'5050':'btn-5050','phone':'btn-phone','audience':'btn-audience','expert':'btn-expert'}[pick];
    document.getElementById(id).classList.add('used');
  },

  life5050(){
    if(!this.lifelines['5050']) return;
    this.markUsed('btn-5050','5050');
    const q=this.pack[this.index];
    const wrong=[0,1,2,3].filter(i=>i!==q.c).sort(()=>Math.random()-.5).slice(0,2);
    document.querySelectorAll('.option').forEach((o,i)=>{if(wrong.includes(i))o.classList.add('hidden-50');});
  },
  lifePhone(){
    if(!this.lifelines['phone']) return;
    this.markUsed('btn-phone','phone'); this.isPaused=true;
    const q=this.pack[this.index]; const L=String.fromCharCode(65+q.c); const A=q.o[q.c];
    let msg="";
    if(this.user.gender==='male') msg=`Alo Ä‘áº¡i ca Ã ? Em tra nguá»“n máº­t rá»“i, cháº¯c cháº¯n lÃ  <b>${L}: ${A}</b> nhÃ©!`;
    else if(this.user.gender==='female') msg=`Chá»‹ Ä‘áº¹p Æ¡i, lÃ  <b>${L}: ${A}</b> Ä‘Ã³! Sai lÃ  em dá»—i!`;
    else msg=`Theo nguá»“n NASA, Ä‘Ã¡p Ã¡n lÃ  <b>${L}: ${A}</b> nha!`;
    this.showOverlay("ğŸ“ NGÆ¯á»œI THÃ‚N MÃCH NÆ¯á»šC",msg);
  },
  lifeAudience(){
    if(!this.lifelines['audience']) return;
    this.markUsed('btn-audience','audience'); this.isPaused=true;
    const q=this.pack[this.index]; let stats=[0,0,0,0];
    stats[q.c]=Math.floor(Math.random()*10)+85; let remain=100-stats[q.c];
    for(let i=0;i<4;i++){if(i!==q.c){let v=Math.floor(Math.random()*remain);stats[i]=v;remain-=v;}}
    let html=`<div style="display:flex;justify-content:space-around;align-items:flex-end;height:150px;margin-top:20px;">`;
    stats.forEach((v,i)=>{const isC=i===q.c;html+=`
      <div style="width:40px;text-align:center;">
        <div style="height:${v}px;background:${isC?'var(--green)':'#555'};margin:0 auto;width:20px;border-radius:3px 3px 0 0;"></div>
        <div style="margin-top:5px;font-weight:bold;">${String.fromCharCode(65+i)}</div>
        <div style="font-size:.8em;color:${isC?'var(--green)':'#aaa'}">${v}%</div>
      </div>`;});
    html+=`</div>`;
    this.showOverlay("ğŸ‘¥ Ã KIáº¾N KHÃN GIáº¢",`KhÃ¡n giáº£ bÃ¬nh chá»n:<br>${html}`);
  },
  lifeExpert(){
    if(!this.lifelines['expert']) return;
    this.markUsed('btn-expert','expert'); this.isPaused=true;
    const q=this.pack[this.index]; const L=String.fromCharCode(65+q.c);
    const c=`
      <div style="text-align:left;background:rgba(255,255,255,.1);padding:10px;border-radius:5px;margin-bottom:5px;">
        ğŸ§” <b>GS. Xoay:</b> "Cháº¯c cháº¯n lÃ  <b>${L}</b>."
      </div>
      <div style="text-align:left;background:rgba(255,255,255,.1);padding:10px;border-radius:5px;">
        ğŸ‘©â€ğŸ« <b>TS. NCT:</b> "Äá»“ng Ã½! Chá»n <b>${L}</b> lÃ  qua mÃ n."
      </div>`;
    this.showOverlay("ğŸ§™ Tá»” TÆ¯ Váº¤N",c);
  },
  markUsed(id,key){document.getElementById(id).classList.add('used');this.lifelines[key]=false;},
  showOverlay(t,c){document.getElementById('overlay').classList.remove('hidden');document.getElementById('overlay-title').innerHTML=t;document.getElementById('overlay-content').innerHTML=c;},
  closeOverlay(){document.getElementById('overlay').classList.add('hidden');this.isPaused=false;},

  check(i){
    clearInterval(this.interval);
    const q=this.pack[this.index];
    const opts=document.querySelectorAll('.option');
    document.getElementById('options').classList.add('disabled');
    if(i===q.c){
      opts[i].classList.add('correct'); this.index++;
      setTimeout(()=>{ if(this.index===15) this.win(); else this.loadQuestion(); },1000);
    }else{
      opts[i].classList.add('wrong'); opts[q.c].classList.add('correct');
      this.saveProgress(); setTimeout(()=>this.lose(false),2000);
    }
  },
  saveProgress(){
    const passed=this.pack.slice(0,this.index).map(q=>q.q);
    this.lockedIds=[...new Set([...this.lockedIds,...passed])];
    localStorage.setItem("NCT_MASTER",JSON.stringify(this.lockedIds));
  },
  lose(timeout){
    const p=this.getPronoun(), n=this.user.name;
    let msg="";
    if(this.index<5){
      msg=this.user.gender==='male'?`Äáº¡i ca ${n} Æ¡i! CÃ¢u dá»… mÃ  cÅ©ng trÆ°á»£t ğŸ˜…`:
          this.user.gender==='female'?`Chá»‹ ${n} xinh mÃ  lá»¡ tay rá»“i! ğŸ’„`:`Tráº» con cÅ©ng biáº¿t mÃ  ${n} láº¡i sai Æ°?`;
    }else if(this.index<10){
      msg=timeout?`Háº¿t giá» rá»“i ${p} ${n} Æ¡i!`:`Sai má»™t ly Ä‘i má»™t dáº·m. ${p} ${n} bÃ¬nh tÄ©nh hÆ¡n nhÃ©!`;
    }else msg=`Tiáº¿c quÃ¡! ${p} ${n} suÃ½t thÃ nh Huyá»n Thoáº¡i rá»“i.`;
    this.endScreen(timeout?"âŒ› Háº¾T GIá»œ":"ğŸ’€ GAME OVER",msg);
  },
  win(){
    this.saveProgress(); const n=this.user.name;
    let msg=this.user.gender==='male'?`Äá»‰nh cao! Äáº¡i ca ${n} lÃ  giÃ¡o sÆ° biáº¿t tuá»‘t ğŸ†`:
            this.user.gender==='female'?`Ná»¯ tháº§n ${n} vá»«a xinh vá»«a giá»i ğŸ‘‘`:
            `15/15! Báº¡n ${n} lÃ  bá»™ nÃ£o thiÃªn tÃ i!`;
    this.endScreen("ğŸ‘‘ HUYá»€N THOáº I",msg);
  },
  getPronoun(){return this.user.gender==='male'?'anh':this.user.gender==='female'?'chá»‹':'báº¡n';},
  endScreen(t,m){
    clearInterval(this.interval);
    document.getElementById('screen-play').classList.add('hidden');
    document.getElementById('screen-result').classList.remove('hidden');
    document.getElementById('res-title').innerText=t;
    document.getElementById('res-msg').innerHTML=m;
  }
};

function handleEnter(e){if(e.key==='Enter') game.start();}
document.getElementById('inp-name').focus();
</script>
</body>
</html>
