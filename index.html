<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>15 C√¢u Sinh T·ª≠ - NCT Edition</title>
    <style>
        :root {
            --gold: #f1c40f; --blue: #3498db; --dark: #020230; --red: #e74c3c; --green: #2ecc71;
        }
        body { margin:0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--dark); color:#fff; display:flex; justify-content:center; align-items:center; min-height:100vh; overflow: hidden; }
        .box { width: 95%; max-width: 500px; background: #000; border: 2px solid var(--gold); border-radius: 20px; padding: 25px; box-shadow: 0 0 30px rgba(241, 196, 15, 0.3); position: relative; }
        
        h1, h2 { text-align: center; color: var(--gold); margin: 10px 0; }
        .rule-list { font-size: 0.9em; line-height: 1.6; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; margin: 15px 0; border: 1px dashed var(--gold); }
        
        #timer { font-size: 2em; text-align: center; font-weight: bold; color: var(--red); text-shadow: 0 0 10px var(--red); margin: 10px 0; }
        
        .options-grid { display: grid; gap: 10px; margin-top: 20px; }
        .option { padding: 12px; border: 1px solid var(--blue); border-radius: 8px; cursor: pointer; transition: 0.2s; background: rgba(52, 152, 219, 0.1); }
        .option:hover { background: rgba(52, 152, 219, 0.3); }
        .option.correct { background: var(--green) !important; border-color: #fff; }
        .option.wrong { background: var(--red) !important; border-color: #fff; }
        .option.hidden-50 { opacity: 0.2; pointer-events: none; }
        
        .btn { width: 100%; padding: 12px; margin-top: 10px; border-radius: 8px; border: 2px solid var(--gold); background: transparent; color: var(--gold); font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn:hover:not(:disabled) { background: var(--gold); color: #000; }
        .btn:disabled { opacity: 0.3; cursor: not-allowed; }
        
        #explain { color: var(--gold); margin-top: 15px; font-style: italic; text-align: center; min-height: 20px; }
        .hidden { display: none; }
        .nct-signature { text-align: center; font-size: 0.75em; opacity: 0.5; margin-top: 20px; letter-spacing: 1px; }
        .disabled { pointer-events: none; }
    </style>
</head>
<body>

<div class="box">
    <div id="screen-start">
        <h1>üß† 15 C√ÇU SINH T·ª¨</h1>
        <div class="rule-list">
            üìç <b>Lu·∫≠t ch∆°i:</b><br>
            1. Tr·∫£ l·ªùi ƒë√∫ng 15 c√¢u ƒë·ªÉ th√†nh Huy·ªÅn Tho·∫°i.<br>
            2. M·ªói c√¢u c√≥ <b>20 gi√¢y</b> suy nghƒ©.<br>
            3. Quy·ªÅn tr·ª£ gi√∫p <b>50:50</b> (duy nh·∫•t 1 l·∫ßn).<br>
            4. T·ª´ c√¢u 10, b·∫°n c√≥ quy·ªÅn <b>D·ª´ng ch∆°i</b> ƒë·ªÉ b·∫£o to√†n danh d·ª±.
        </div>
        <button class="btn" onclick="game.start()">B·∫ÆT ƒê·∫¶U CHINH PH·ª§C</button>
        <div class="nct-signature">S·∫£n ph·∫©m gi·∫£i tr√≠ ƒë∆∞·ª£c tinh ch·ªânh b·ªüi NCT ‚ú®</div>
    </div>

    <div id="screen-play" class="hidden">
        <div id="timer">20</div>
        <h2 id="progress" style="font-size: 1em;">C√¢u 1/15</h2>
        <p id="question" style="font-size: 1.1em; text-align: center; font-weight: 500;"></p>
        
        <div class="options-grid" id="options"></div>
        
        <div id="explain" class="hidden"></div>
        
        <button id="help-btn" class="btn" style="border-color: #9b59b6; color: #9b59b6;" onclick="game.useHelp()">üÜò TR·ª¢ GI√öP 50:50</button>
        <button id="stop-btn" class="btn hidden" style="border-color: #e67e22; color: #e67e22;" onclick="game.stop()">‚èπÔ∏è D·ª™NG CU·ªòC CH∆†I</button>
    </div>

    <div id="screen-result" class="hidden">
        <h1 id="res-title">K·∫æT QU·∫¢</h1>
        <p id="res-msg" style="text-align: center; line-height: 1.5; font-size: 1.1em;"></p>
        <button class="btn" onclick="location.reload()">CH∆†I L·∫†I</button>
        <div class="nct-signature">Hy v·ªçng b·∫°n ƒë√£ c√≥ nh·ªØng gi√¢y ph√∫t th∆∞ gi√£n - NCT</div>
    </div>
</div>

<script>
/* ================== DATABASE ================== */
const QUESTIONS = [
    {id:1,level:"easy",q:"Th√°ng n√†o c√≥ 28 ng√†y?",o:["Th√°ng 2","T·∫•t c·∫£ c√°c th√°ng","Th√°ng nhu·∫≠n","Th√°ng 12"],c:1},
    {id:2,level:"easy",q:"B√°nh ch∆∞ng h√¨nh g√¨?",o:["H√¨nh tr√≤n","H√¨nh tam gi√°c","H√¨nh vu√¥ng","H√¨nh l·ª•c gi√°c"],c:2},
    {id:3,level:"easy",q:"Con ch√≥ c√≥ m·∫•y ch√¢n?",o:["2 ch√¢n","4 ch√¢n","6 ch√¢n","8 ch√¢n"],c:1},
    {id:4,level:"easy",q:"M√†u n√†o tr·ªôn gi·ªØa ƒê·ªè v√† V√†ng?",o:["Xanh l√°","T√≠m","Cam","H·ªìng"],c:2},
    {id:5,level:"easy",q:"Lo√†i chim n√†o kh√¥ng bi·∫øt bay?",o:["ƒê√† ƒëi·ªÉu","ƒê·∫°i b√†ng","B·ªì c√¢u","S·∫ª"],c:0},
    {id:20,level:"medium",q:"S·ªë n√†o l√† s·ªë nguy√™n t·ªë nh·ªè nh·∫•t?",o:["0","1","2","3"],c:2},
    {id:21,level:"medium",q:"HTML l√† vi·∫øt t·∫Øt c·ªßa t·ª´ n√†o?",o:["Hyperlink Text","HyperText Markup","High Text Machine","Hyper Tool"],c:1},
    {id:22,level:"medium",q:"Kim t·ª± th√°p Giza ·ªü ƒë√¢u?",o:["Iran","Iraq","Ai C·∫≠p","Th·ªï Nhƒ© K·ª≥"],c:2},
    {id:23,level:"medium",q:"Tr√°i ƒë·∫•t m·∫•t bao l√¢u ƒë·ªÉ quay 1 v√≤ng quanh M·∫∑t tr·ªùi?",o:["24 gi·ªù","30 ng√†y","365 ng√†y","12 th√°ng"],c:2},
    {id:24,level:"medium",q:"ƒê∆°n v·ªã ƒëo c∆∞·ªùng ƒë·ªô d√≤ng ƒëi·ªán?",o:["V√¥n (V)","Ampe (A)","O√°t (W)","√îm (Œ©)"],c:1},
    {id:40,level:"hard",q:"Ngh·ªãch l√Ω: 'T√¥i ƒëang n√≥i d·ªëi'. N·∫øu t√¥i n√≥i th·∫≠t th√¨ t√¥i...?",o:["ƒêang n√≥i d·ªëi","ƒêang n√≥i th·∫≠t","Kh√¥ng x√°c ƒë·ªãnh","ƒê√∫ng"],c:0, e:"N·∫øu t√¥i n√≥i th·∫≠t, th√¨ n·ªôi dung 't√¥i n√≥i d·ªëi' ph·∫£i ƒë√∫ng, suy ra t√¥i ƒëang n√≥i d·ªëi."},
    {id:41,level:"hard",q:"S·ªë n√†o v·ª´a l√† ch√≠nh ph∆∞∆°ng v·ª´a l√† l·∫≠p ph∆∞∆°ng?",o:["16","36","64","81"],c:2, e:"64 = 8^2 v√† 4^3."},
    {id:42,level:"hard",q:"H√†nh tinh n√†o kh√¥ng c√≥ m·∫∑t trƒÉng?",o:["Sao H·ªèa","Sao Kim","Sao M·ªôc","Sao Th·ªï"],c:1, e:"Sao Th·ªßy v√† Sao Kim kh√¥ng c√≥ v·ªá tinh."},
    {id:43,level:"hard",q:"V√¨ sao b·∫ßu tr·ªùi c√≥ m√†u xanh?",o:["Ph·∫£n x·∫° bi·ªÉn","T√°n x·∫° Rayleigh","T·∫ßng Ozon","B·ª•i v≈© tr·ª•"],c:1, e:"√Ånh s√°ng xanh c√≥ b∆∞·ªõc s√≥ng ng·∫Øn b·ªã t√°n x·∫° m·∫°nh nh·∫•t."},
    {id:44,level:"hard",q:"Qu·ªëc gia n√†o c√≥ di·ªán t√≠ch l·ªõn nh·∫•t?",o:["M·ªπ","Trung Qu·ªëc","Nga","Canada"],c:2}
];

/* ================== GAME LOGIC ================== */
const game = {
    index: 0,
    pack: [],
    timer: 20,
    interval: null,
    hasUsedHelp: false,
    lockedIds: JSON.parse(localStorage.getItem("LOCKED_NCT") || "[]"),

    start() {
        this.pack = this.buildPack();
        if(this.pack.length < 15) {
            alert("B·∫°n ƒë√£ tr·∫£ l·ªùi h·∫øt c√¢u h·ªèi trong kho! H·ªá th·ªëng s·∫Ω reset l·∫°i.");
            localStorage.removeItem("LOCKED_NCT");
            location.reload();
            return;
        }
        document.getElementById('screen-start').classList.add('hidden');
        document.getElementById('screen-play').classList.remove('hidden');
        this.loadQuestion();
    },

    buildPack() {
        const get = (lvl, n) => QUESTIONS.filter(q => q.level === lvl && !this.lockedIds.includes(q.id))
                                        .sort(() => Math.random() - 0.5).slice(0, n);
        return [...get('easy', 5), ...get('medium', 5), ...get('hard', 5)];
    },

    loadQuestion() {
        clearInterval(this.interval);
        const q = this.pack[this.index];
        this.timer = 20;
        document.getElementById('timer').innerText = this.timer;
        document.getElementById('timer').style.color = "var(--red)";
        
        document.getElementById('progress').innerText = `C√ÇU ${this.index + 1}/15`;
        document.getElementById('question').innerText = q.q;
        document.getElementById('explain').classList.add('hidden');
        document.getElementById('stop-btn').classList.toggle('hidden', this.index < 9);
        document.getElementById('help-btn').disabled = this.hasUsedHelp;

        const optBox = document.getElementById('options');
        optBox.innerHTML = '';
        optBox.classList.remove('disabled');

        q.o.forEach((t, i) => {
            const d = document.createElement('div');
            d.className = 'option';
            d.innerHTML = `<b>${String.fromCharCode(65+i)}.</b> ${t}`;
            d.onclick = () => this.check(i);
            optBox.appendChild(d);
        });

        this.interval = setInterval(() => {
            this.timer--;
            document.getElementById('timer').innerText = this.timer;
            if(this.timer <= 0) {
                clearInterval(this.interval);
                this.end("H·∫æT GI·ªú!", "Th·ªùi gian kh√¥ng ch·ªù ƒë·ª£i ai, nh·∫•t l√† nh·ªØng ng∆∞·ªùi ch·∫≠m ch·∫°p...");
            }
        }, 1000);
    },

    useHelp() {
        if(this.hasUsedHelp) return;
        this.hasUsedHelp = true;
        document.getElementById('help-btn').disabled = true;
        
        const q = this.pack[this.index];
        const corrects = [q.c];
        const incorrects = [0,1,2,3].filter(i => i !== q.c);
        const toHide = incorrects.sort(() => Math.random() - 0.5).slice(0, 2);
        
        const optElements = document.querySelectorAll('.option');
        toHide.forEach(idx => optElements[idx].classList.add('hidden-50'));
    },

    check(idx) {
        clearInterval(this.interval);
        const q = this.pack[this.index];
        const optElements = document.querySelectorAll('.option');
        document.getElementById('options').classList.add('disabled');

        if(idx === q.c) {
            optElements[idx].classList.add('correct');
            this.index++;
            setTimeout(() => {
                if(this.index === 15) this.win();
                else this.loadQuestion();
            }, 1000);
        } else {
            optElements[idx].classList.add('wrong');
            optElements[q.c].classList.add('correct');
            if(q.e) {
                const exp = document.getElementById('explain');
                exp.innerText = "üí° " + q.e;
                exp.classList.remove('hidden');
            }
            this.saveProgress();
            setTimeout(() => this.lose(), 2000);
        }
    },

    saveProgress() {
        const passedIds = this.pack.slice(0, this.index).map(q => q.id);
        this.lockedIds = [...new Set([...this.lockedIds, ...passedIds])];
        localStorage.setItem("LOCKED_NCT", JSON.stringify(this.lockedIds));
    },

    stop() {
        this.saveProgress();
        this.end("‚èπÔ∏è D·ª™NG CU·ªòC CH∆†I", `B·∫°n d·ª´ng l·∫°i ·ªü c√¢u ${this.index + 1}. M·ªôt quy·∫øt ƒë·ªãnh s√°ng su·ªët v√† ƒë·∫ßy l√Ω tr√≠!`);
    },

    lose() {
        let troll = "";
        if(this.index < 5) troll = "ƒê·∫øn h·ªçc sinh l·ªõp 1 c√≤n l√†m t·ªët h∆°n b·∫°n... üôÑ";
        else if(this.index < 10) troll = "C≈©ng c·ªë g·∫Øng ƒë·∫•y, nh∆∞ng b·ªô n√£o n√†y c·∫ßn b·∫£o tr√¨ r·ªìi! üõ†Ô∏è";
        else troll = "Su√Ωt ch√∫t n·ªØa th√†nh Huy·ªÅn tho·∫°i. Ti·∫øc qu√°!";
        
        this.end("üíÄ THUA CU·ªòC", troll);
    },

    win() {
        this.saveProgress();
        this.end("üëë HUY·ªÄN THO·∫†I", "15/15! B·∫°n ch√≠nh l√† b·ªô n√£o qu√°i ki·ªát m√† ch√∫ng t√¥i t√¨m ki·∫øm! üî•");
    },

    end(title, msg) {
        clearInterval(this.interval);
        document.getElementById('screen-play').classList.add('hidden');
        document.getElementById('screen-result').classList.remove('hidden');
        document.getElementById('res-title').innerText = title;
        document.getElementById('res-msg').innerText = msg;
    }
};
</script>
</body>
</html>
