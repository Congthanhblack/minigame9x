<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ai L√† Th√°nh Nh·ªç Pro - Hosted by NCT</title>
    <style>
        :root { --gold: #f1c40f; --blue: #0984e3; --red: #d63031; --dark: #020230; --green: #2ecc71; }
        body { margin: 0; background: radial-gradient(circle, #0a3d62, #020230); font-family: 'Segoe UI', Tahoma, sans-serif; color: white; display: flex; justify-content: center; align-items: center; min-height: 100vh; overflow: hidden; }
        .main-game { width: 95%; max-width: 500px; background: rgba(0, 0, 0, 0.95); padding: 25px; border: 3px solid var(--gold); border-radius: 25px; text-align: center; box-shadow: 0 0 50px rgba(241, 196, 15, 0.2); transition: transform 0.1s; }
        .nct-host { font-style: italic; color: var(--gold); margin-bottom: 15px; min-height: 60px; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; font-weight: bold; text-shadow: 1px 1px 2px black; }
        .grid-layout { display: grid; gap: 12px; margin-top: 10px; }
        .btn-action { background: transparent; border: 2px solid var(--gold); color: white; padding: 12px; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 1rem; transition: 0.3s; }
        .btn-action:hover { background: var(--gold); color: black; }
        .penalty-tag { background: var(--red); padding: 8px 15px; border-radius: 20px; font-weight: bold; display: inline-block; margin-bottom: 15px; }
        .question-box { margin: 15px 0; min-height: 100px; border-bottom: 1px solid #333; display: flex; align-items: center; justify-content: center; }
        .option { background: rgba(255, 255, 255, 0.05); border: 1px solid var(--blue); color: white; padding: 12px; border-radius: 12px; cursor: pointer; width: 100%; margin-bottom: 8px; transition: 0.2s; position: relative; font-size: 1rem; }
        .hidden { display: none; }
        #step-counter { margin-top: 15px; color: #888; font-size: 0.8rem; }
        .shake { animation: shake 0.3s; }
        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-10px); } 50% { transform: translateX(10px); } 75% { transform: translateX(-10px); } 100% { transform: translateX(0); } }
    </style>
</head>
<body>
    <div class="main-game" id="game-container">
        <div id="scr-lang">
            <h1 style="color: var(--gold);">üç∫ AI L√Ä TH√ÅNH NH·ªå üç∫</h1>
            <div class="nct-host">"NCT ƒë√£ s·∫µn s√†ng, c√≤n b·∫°n th√¨ sao?"</div>
            <button class="btn-action" style="width: 100%" onclick="initGame()">B·∫ÆT ƒê·∫¶U CU·ªòC CH∆†I üöÄ</button>
        </div>

        <div id="scr-mode" class="hidden">
            <div class="nct-host" id="mode-msg">"Ch·ªçn s·ªë c√¢u h·ªèi. ƒê·ªô kh√≥ tƒÉng d·∫ßn theo m·ªói b∆∞·ªõc!"</div>
            <div class="grid-layout">
                <button class="btn-action" onclick="startGame(6)">NH·∫∏ NH√ÄNG (6 c√¢u)</button>
                <button class="btn-action" onclick="startGame(10)">TH√ÅNH NH·∫¨U (10 c√¢u)</button>
                <button class="btn-action" onclick="startGame(15)">H·ª¶Y DI·ªÜT (15 c√¢u)</button>
            </div>
        </div>

        <div id="scr-quiz" class="hidden">
            <div id="penalty-text" class="penalty-tag"></div>
            <div class="nct-host" id="quiz-nct-msg">"T·∫≠p trung v√†o, ƒë·ª´ng ƒë·ªÉ t√¥i ph·∫£i c∆∞·ªùi v√†o m·∫∑t!"</div>
            <div class="question-box"><h2 id="q-text"></h2></div>
            <div id="options-box"></div>
            <div id="step-counter"></div>
        </div>

        <div id="scr-res" class="hidden">
            <h1 id="res-title"></h1>
            <div style="font-size: 5rem;" id="res-icon"></div>
            <p id="res-desc" style="font-weight: bold; color: var(--gold); font-size: 1.2rem;"></p>
            <div class="nct-host" id="res-nct"></div>
            <button class="btn-action" onclick="location.reload()" style="width: 100%;">NG∆Ø·ªúI TI·∫æP THEO üîÑ</button>
        </div>
    </div>

    <script>
        const QUESTIONS = {
            easy: [
                {id: 1, q: "C√°i g√¨ ƒëen khi s·∫°ch v√† tr·∫Øng khi b·∫©n?", o: ["Than", "B·∫£ng ƒëen", "M·ª±c", "T√≥c"], a: 1},
                {id: 2, q: "Con m√®o n√†o c·ª±c k·ª≥ s·ª£ chu·ªôt?", o: ["M√®o Tom", "Doraemon", "M√®o Oggy", "M√®o Kitty"], a: 1},
                {id: 4, q: "Th√°ng n√†o c√≥ 28 ng√†y?", o: ["Th√°ng 2", "Th√°ng Nhu·∫≠n", "T·∫•t c·∫£ c√°c th√°ng", "Th√°ng 12"], a: 2},
                {id: 5, q: "Con g√¨ c√†ng to c√†ng nh·ªè?", o: ["Con voi", "Con cua", "Con ki·∫øn", "Con r√πa"], a: 1},
                {id: 8, q: "Qu·∫ßn g√¨ r·ªông nh·∫•t?", o: ["Qu·∫ßn b√≤", "Qu·∫ßn ƒë·∫£o", "Qu·∫ßn ·ªëng loe", "Qu·∫ßn ƒë√πi"], a: 1},
                {id: 18, q: "V·ªãt n√†o ƒëi b·∫±ng 2 ch√¢n?", o: ["V·ªãt Donald", "V·ªãt b·∫ßu", "T·∫•t c·∫£ lo√†i v·ªãt", "V·ªãt quay"], a: 2},
                {id: 69, q: "G√† tr·ªëng c√≥ th·ªÉ ƒë·∫ª bao nhi√™u tr·ª©ng m·ªôt nƒÉm?", o: ["0", "1", "12", "365"], a: 0}
            ],
            medium: [
                {id: 11, q: "H√†nh tinh n√†o g·∫ßn M·∫∑t tr·ªùi nh·∫•t?", o: ["Sao Kim", "Sao H·ªèa", "Sao Th·ªßy", "Tr√°i ƒê·∫•t"], a: 2},
                {id: 13, q: "Kim lo·∫°i n√†o l·ªèng ·ªü nhi·ªát ƒë·ªô th∆∞·ªùng?", o: ["S·∫Øt", "V√†ng", "Th·ªßy ng√¢n", "Ch√¨"], a: 2},
                {id: 23, q: "Tr√™n nh·∫•p d∆∞·ªõi s∆∞·ªõng, d∆∞·ªõi nh·∫•p tr√™n ƒëau l√† l√†m g√¨?", o: ["ƒêi xe ƒë·∫°p", "C√¢u c√°", "ƒê√°nh ƒëu", "Ch√®o thuy·ªÅn"], a: 1},
                {id: 76, q: "Tr√°i tim ng∆∞·ªùi b√¨nh th∆∞·ªùng c√≥ m·∫•y ngƒÉn?", o: ["2", "3", "4", "5"], a: 2},
                {id: 82, q: "M√†u n√†o KH√îNG c√≥ trong d·∫£i c·∫ßu v·ªìng?", o: ["T√≠m", "Ch√†m", "Tr·∫Øng", "ƒê·ªè"], a: 2}
            ],
            hard: [
                {id: 12, q: "Vua n√†o ·ªü ng√¥i ng·∫Øn nh·∫•t VN (3 ng√†y)?", o: ["D·ª•c ƒê·ª©c", "Hi·ªáp H√≤a", "H√†m Nghi", "Duy T√¢n"], a: 0},
                {id: 57, q: "Qu·ªëc gia n√†o tr√™n th·∫ø gi·ªõi kh√¥ng c√≥ mu·ªói?", o: ["Iceland", "Greenland", "Th·ª•y Sƒ©", "Nh·∫≠t B·∫£n"], a: 0},
                {id: 61, q: "Tr√°i ƒë·∫•t t·ª± quay quanh tr·ª•c m·∫•t bao l√¢u?", o: ["23h 56ph", "24h", "24h 04ph", "25h"], a: 0},
                {id: 97, q: "B·ªë m·∫π c√≥ 6 trai, m·ªói ng∆∞·ªùi c√≥ 1 em g√°i. Nh√† c√≥ m·∫•y anh em?", o: ["13", "12", "7", "8"], a: 2}
            ]
        };

        const NCT_TRICK = { id: 999, q: "NCT c√≥ ƒë·∫πp trai kh√¥ng?", o: ["C√≥", "R·∫•t ƒë·∫πp", "Kh√¥ng", "C·ª±c ph·∫©m"], a: 2, isTrick: true };

        const WRONG_MSGS = [
            "ü§° Nh√¨n c√°i m·∫∑t l√† th·∫•y sai r·ªìi!", "ü§¶‚Äç‚ôÇÔ∏è U·ªëng ƒëi cho th√¥ng minh ra!", "ü§® Ki·∫øn th·ª©c n√†y ƒë√£ b·ªã r∆∞·ª£u b√†o m√≤n?", 
            "üç∫ R√≥t ƒë·∫ßy v√†o, sai th·∫ø n√†y th√¨ ch·ªãu!", "üëª Sai r·ªìi ƒë·ªì ng·ªëc ·∫°!", "üåö C·∫°n l·ªùi v·ªõi b·∫°n lu√¥n..."
        ];

        const CORRECT_MSGS = [
            "üëè T·∫°m ƒë∆∞·ª£c ƒë·∫•y!", "üî• Kh√° qu√° nh·ªâ, ti·∫øp ƒëi!", "üåü Wow, b·∫Øt ƒë·∫ßu th·∫•y n·ªÉ r·ªìi ƒë√≥!", 
            "üëë ƒê·ªânh cao! Tr√πm cu·ªëi l√† ƒë√¢y sao?", "üíé Thi√™n t√†i b√†n nh·∫≠u ch√≠nh l√† b·∫°n!", "üëΩ B·∫°n ƒë·∫øn t·ª´ h√†nh tinh kh√°c ƒë√∫ng kh√¥ng?"
        ];

        let state = { limit: 0, step: 0, currentList: [], mistakes: 0, streak: 0 };

        function initGame() {
            document.getElementById('scr-lang').classList.add('hidden');
            document.getElementById('scr-mode').classList.remove('hidden');
        }

        function startGame(limit) {
            state.limit = limit;
            state.step = 0;
            state.mistakes = 0;
            state.streak = 0;

            let usedIds = JSON.parse(sessionStorage.getItem('used_v4') || '[]');
            const getValid = (list) => list.filter(q => !usedIds.includes(q.id)).sort(() => Math.random() - 0.5);

            let ePool = getValid(QUESTIONS.easy);
            let mPool = getValid(QUESTIONS.medium);
            let hPool = getValid(QUESTIONS.hard);

            let list = [];
            let part = Math.floor(limit/3);
            list.push(...ePool.slice(0, part));
            list.push(...mPool.slice(0, part));
            list.push(...hPool.slice(0, limit - (part*2)));

            let trickPos = Math.floor(Math.random() * 4) + 2;
            if(trickPos >= list.length) trickPos = list.length - 1;
            list.splice(trickPos, 0, NCT_TRICK);

            state.currentList = list.slice(0, limit);
            sessionStorage.setItem('used_v4', JSON.stringify([...usedIds, ...state.currentList.map(q => q.id)]));

            document.getElementById('scr-mode').classList.add('hidden');
            document.getElementById('scr-quiz').classList.remove('hidden');
            renderQ();
        }

        function renderQ() {
            if (state.step >= state.limit) { showResult(); return; }

            let q = state.currentList[state.step];
            document.getElementById('penalty-text').innerText = `C√ÇU ${state.step + 1} / ${state.limit}`;
            document.getElementById('q-text').innerText = q.q;
            
            const box = document.getElementById('options-box');
            box.innerHTML = '';
            
            q.o.forEach((opt, i) => {
                let btn = document.createElement('button');
                btn.className = 'option';
                btn.innerText = opt;
                if(q.isTrick && i === 2) { 
                    btn.onmouseenter = btn.ontouchstart = () => {
                        btn.innerText = "Kh√¥ng... th·ªÉ ƒë·∫πp trai h∆°n!";
                        btn.style.background = "var(--green)";
                    };
                }
                btn.onclick = () => handleSelect(i);
                box.appendChild(btn);
            });
        }

        function handleSelect(idx) {
            let q = state.currentList[state.step];
            let options = document.querySelectorAll('.option');
            let nctMsg = document.getElementById('quiz-nct-msg');
            let container = document.getElementById('game-container');

            if (idx === q.a) {
                options[idx].style.background = "var(--green)";
                state.streak++;
                let msgIdx = Math.min(state.streak, CORRECT_MSGS.length - 1);
                nctMsg.innerText = "NCT: " + CORRECT_MSGS[msgIdx];
                nctMsg.style.color = "var(--green)";
                
                setTimeout(() => { state.step++; renderQ(); }, 600);
            } else {
                options[idx].style.background = "var(--red)";
                state.mistakes++;
                state.streak = 0;
                container.classList.add('shake');
                nctMsg.innerText = "NCT: " + WRONG_MSGS[Math.floor(Math.random()*WRONG_MSGS.length)];
                nctMsg.style.color = "var(--red)";

                setTimeout(() => {
                    container.classList.remove('shake');
                    alert("SAI R·ªíI! PH·∫†T 1 LY! üç∫");
                    state.step++;
                    renderQ();
                }, 400);
            }
        }

        function showResult() {
            document.getElementById('scr-quiz').classList.add('hidden');
            document.getElementById('scr-res').classList.remove('hidden');
            let resTitle = document.getElementById('res-title');
            let resIcon = document.getElementById('res-icon');
            let resDesc = document.getElementById('res-desc');
            let resNct = document.getElementById('res-nct');
            
            if (state.mistakes === 0) {
                resTitle.innerText = "HUY·ªÄN THO·∫†I B·∫§T B·∫†I";
                resIcon.innerText = "ü§¥";
                resDesc.innerText = "B·∫°n ƒë√£ v∆∞·ª£t qua s·ª± ki·ªÉm so√°t c·ªßa NCT!";
                resNct.innerText = "NCT: 'T√¥i ch√≠nh th·ª©c t√¥n b·∫°n l√†m S∆∞ Ph·ª•...'";
            } else if (state.mistakes <= 2) {
                resTitle.innerText = "C≈®NG ƒê∆Ø·ª¢C ƒê·∫§Y";
                resIcon.innerText = "üç∫";
                resDesc.innerText = `Sai ${state.mistakes} c√¢u.`;
                resNct.innerText = "NCT: 'V·∫´n c√≤n t·ªânh t√°o ch√°n, u·ªëng th√™m ƒëi!'";
            } else {
                resTitle.innerText = "TH√ÅNH NH·ªå ƒê√çCH TH·ª∞C";
                resIcon.innerText = "ü§°";
                resDesc.innerText = `U·ªëng ${state.mistakes} ly ƒëi cho b·ªõt nh·ªç!`;
                resNct.innerText = "NCT: 'Th√¥i, ƒë·ª´ng c√£i, ƒë∆∞a ch√©n ƒë√¢y t√¥i r√≥t...'";
            }
        }
    </script>
</body>
</html>
